{
  "tags": {
    "userDefinedTags": {}
  },
  "parameters": {
    "yarnQueue": "hdf-qe-nightly",
    "lifeTime": -1
  },
  "flexId": null,
  "general": {
    "name": "{{ cluster_name }}",
    "credentialName": "ycloud"
  },
  "cluster": {
    "ambari": {
      "userName": "{{ ambari_username }}",
      "password": "{{ ambari_password }}",
      "blueprintName": "{{ cluster_name }}",
      "ambariRepoDetailsJson": {
        "version": "{{ ambari_version }}",
        "baseUrl": "http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/{{ ambari_version }}",
        "gpgKeyUrl": "http://public-repo-1.hortonworks.com/ambari/centos7/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins"
      },
      "ambariStackDetails": {
        "stack": "{{ stack }}",
        "version": "{{ stack_main_version }}",
        "verify": false,
        "enableGplRepo": false,
        "mpackUrl": "http://s3.amazonaws.com/dev.hortonworks.com/HDF/centos7/3.x/BUILDS/{{ mpack_version }}/tars/hdf_ambari_mp/hdf-ambari-mpack-{{ mpack_version }}.tar.gz",
        "repositoryVersion": "{{ stack_version_number }}",
        "versionDefinitionFileUrl": "http://s3.amazonaws.com/dev.hortonworks.com/HDF/centos7/3.x/BUILDS/{{ stack_version_number }}/{{ stack_version }}.xml"
      },
      "gateway": {
        "enableGateway": false,
        "gatewayType": "INDIVIDUAL"
      },
      "validateBlueprint": false,
      {% if kerberos %}
      "ambariSecurityMasterKey": "",
      "kerberos": {
        "password": "{{ ambari_password }}",
        "masterKey": "{{ ambari_password }}",
        "admin": "{{ ambari_username }}",
        "tcpAllowed": false
      },
      "enableSecurity": true
      {% else %}
      "ambariSecurityMasterKey": ""
      {% endif %}
    }
  },
  "imageSettings": {
    "imageId": "{{ image_id }}",
    "imageCatalog": "{{ image_catalog }}"
  },
  "instanceGroups": [
    {
      "parameters": {},
      "template": {
        "customInstanceType": {
          "cpus": 4,
          "memory": 8192
        }
      },
      "nodeCount": 1,
      "group": "master_1",
      "type": "GATEWAY",
      "recoveryMode": "MANUAL",
      "recipeNames": [
        "{{ cluster_name }}-init-sh-pre-ambari-start",
        "{{ cluster_name }}-hwqe-grpc-sh-pre-ambari-start",
        "{{ cluster_name }}-jdbc-setup-sh-pre-ambari-start"
      ]
    },
    {
      "parameters": {},
      "template": {
        "customInstanceType": {
          "cpus": 4,
          "memory": 8192
        }
      },
      "nodeCount": 1,
      "group": "master_2",
      "type": "CORE",
      "recoveryMode": "MANUAL",
      "recipeNames": [
        "{{ cluster_name }}-init-sh-pre-ambari-start",
        "{{ cluster_name }}-hwqe-grpc-sh-pre-ambari-start",
        "{{ cluster_name }}-db-bootstrap-sh-pre-ambari-start"
      ]
    },
    {
      "parameters": {},
      "template": {
        "customInstanceType": {
          "cpus": 4,
          "memory": 8192
        }
      },
      "nodeCount": 1,
      "group": "master_3",
      "type": "CORE",
      "recoveryMode": "MANUAL",
      "recipeNames": [
        "{{ cluster_name }}-init-sh-pre-ambari-start",
        "{{ cluster_name }}-hwqe-grpc-sh-pre-ambari-start"
      ]
    },
    {
      "parameters": {},
      "template": {
        "customInstanceType": {
          "cpus": 4,
          "memory": 8192
        }
      },
      "nodeCount": 1,
      "group": "master_4",
      "type": "CORE",
      "recoveryMode": "MANUAL",
      "recipeNames": [
        "{{ cluster_name }}-init-sh-pre-ambari-start",
        "{{ cluster_name }}-hwqe-grpc-sh-pre-ambari-start"
      ]
    },
    {
      "parameters": {},
      "template": {
        "customInstanceType": {
          "cpus": 4,
          "memory": 8192
        }
      },
      "nodeCount": 1,
      "group": "master_5",
      "type": "CORE",
      "recoveryMode": "MANUAL",
      "recipeNames": [
        "{{ cluster_name }}-init-sh-pre-ambari-start",
        "{{ cluster_name }}-hwqe-grpc-sh-pre-ambari-start"
      ]
    }
  ],
  "stackAuthentication": {
    "publicKey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDbcc+uaFq0z4bwipiy+o4Nwcm6pdrN0iePc9C5Buhq0ZFmatSXqYj4H252CU7bps/gZ/pNtIzk+/K1oMQX4Zj1UTLVqQF2kMP5TTW1Uud6uNMBWkmhnD0btgRnoBvZjUQpCOqqkPPVqknptpeDnHsXB2NM5zWzLfQAFHvLvjZ5qehBx+xOL6VzYVHwRbnOTAFWMN4SSmorBGcmfWEi4GaVYzYsdW6X8FT6eVczLZJYFyOPNCSeRRc37UwiOPpnXu6OjzwDYnSeuqqMDWp8uFc5/LWokgAlLtFXVz9FO2fuceK9vV40NEzJSfYEmUAXNgbPPGAjRUON7bQIeKRrwzsd sustaining@hortonworks.com",
    "publicKeyId": null
  }
}
